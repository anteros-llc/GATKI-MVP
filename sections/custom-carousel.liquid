<section class="custom-carousel">
  <div class="carousel-wrapper">
    <div class="carousel" data-flickity='{ "cellAlign": "left", "contain": true, "wrapAround": true, "prevNextButtons": true, "pageDots": false }'>
      {%- for block in section.blocks -%}
        {%- if block.type == 'slide' -%}
          <div class="carousel-cell">
            <!-- Image -->
            <div class="carousel-image">
              <img src="{{ block.settings.image | img_url: '800x' }}" alt="{{ block.settings.alt_text | escape }}">
            </div>

            <!-- Text Content -->
            <div class="carousel-text">
              <h2>{{ block.settings.slide_heading }}</h2>
              <p>{{ block.settings.slide_description }}</p>
              <!-- Custom Progress Bars -->
              <ul class="custom-sliders">
                <li>
                  <span>Gentleness</span>
                  <div class="slider">
                    <div class="slider-fill" style="width: {{ block.settings.gentleness }}%;"></div>
                  </div>
                </li>
                <li>
                  <span>Nourishment</span>
                  <div class="slider">
                    <div class="slider-fill" style="width: {{ block.settings.nourishment }}%;"></div>
                  </div>
                </li>
                <li>
                  <span>Staying Power</span>
                  <div class="slider">
                    <div class="slider-fill" style="width: {{ block.settings.staying_power }}%;"></div>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        {%- endif -%}
      {%- endfor -%}
    </div>
  </div>
</section>


<style>
.carousel-cell {
  width: 100%; /* full width */
  height: 460px; /* height of carousel */
  margin-right: 10px;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function () {
  var elem = document.querySelector('.carousel');
  var flkty = new Flickity(elem, {
    cellAlign: 'left',
    contain: true,
    wrapAround: true,
    prevNextButtons: true,
    pageDots: false
  });
});
</script>

{% schema %}
{
  "name": "Custom Carousel",
  "settings": [],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "alt_text",
          "label": "Alt Text",
          "default": "Slide image"
        },
        {
          "type": "text",
          "id": "slide_heading",
          "label": "Heading",
          "default": "Slide Heading"
        },
        {
          "type": "textarea",
          "id": "slide_description",
          "label": "Description",
          "default": "Slide description text goes here."
        },
        {
          "type": "range",
          "id": "gentleness",
          "label": "Gentleness",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 50
        },
        {
          "type": "range",
          "id": "nourishment",
          "label": "Nourishment",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 50
        },
        {
          "type": "range",
          "id": "staying_power",
          "label": "Staying Power",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 50
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom Carousel",
    }
  ]
}
{% endschema %}