<section class="custom-carousel">
  <div class="carousel-wrapper">
    <div class="carousel" data-flickity='{ "cellAlign": "left", "contain": true, "wrapAround": true, "prevNextButtons": true, "pageDots": false }'>
      {%- for block in section.blocks -%}
        {%- if block.type == 'slide' -%}
          <div class="carousel-cell">
            <!-- Image -->
            <div class="carousel-image">
              <img src="{{ block.settings.image | img_url: '800x' }}" alt="{{ block.settings.alt_text | escape }}">
            </div>

            <!-- Text Content -->
            <div class="carousel-text">
              <h2>{{ block.settings.slide_heading }}</h2>
              <p>{{ block.settings.slide_description }}</p>
              <!-- Custom Progress Bars -->
              <ul class="custom-sliders">
                <li>
                  <span>Gentleness</span>
                  <div class="slider">
                    <div class="slider-fill" style="width: {{ block.settings.gentleness }}%;"></div>
                  </div>
                </li>
                <li>
                  <span>Nourishment</span>
                  <div class="slider">
                    <div class="slider-fill" style="width: {{ block.settings.nourishment }}%;"></div>
                  </div>
                </li>
                <li>
                  <span>Staying Power</span>
                  <div class="slider">
                    <div class="slider-fill" style="width: {{ block.settings.staying_power }}%;"></div>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        {%- endif -%}
      {%- endfor -%}
    </div>
  </div>
</section>


<style>
/* General Carousel Wrapper */
.custom-carousel {
  width: 100%;
  margin: auto;
  overflow: hidden;
  padding: 2rem 0;
}

/* Carousel Container */
.carousel-wrapper {
  position: relative;
  max-width: 1200px;
  margin: auto;
}

.carousel {
  display: flex;
  align-items: center;
}

/* Individual Slide */
.carousel-cell {
  flex: 0 0 100%; /* Full width */
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 2rem;
  box-sizing: border-box;
}

/* Image Styling */
.carousel-image img {
  width: 50%; /* Adjust based on design */
  height: auto;
  object-fit: cover;
  border-radius: 8px;
}

/* Text Content */
.carousel-text {
  width: 45%;
  text-align: left;
}

.carousel-text h2 {
  font-size: 2rem;
  margin-bottom: 1rem;
  color: #333;
}

.carousel-text p {
  font-size: 1rem;
  margin-bottom: 1.5rem;
  color: #555;
}

/* Custom Progress Bars */
.custom-sliders {
  list-style: none;
  padding: 0;
  margin: 0;
}

.custom-sliders li {
  margin-bottom: 1rem;
  display: flex;
  align-items: center;
  gap: 1rem;
}

.custom-sliders span {
  font-size: 0.9rem;
  color: #333;
  flex-shrink: 0;
  width: 120px;
}

/* Slider Container */
.slider {
  width: 100%;
  height: 6px;
  background: #ddd;
  position: relative;
  border-radius: 3px;
  overflow: hidden;
}

.slider-fill {
  height: 100%;
  background: #ff6b6b; /* Custom color */
  border-radius: 3px;
  transition: width 0.3s ease;
}

/* Flickity Navigation Buttons */
.flickity-prev-next-button {
  background: #000;
  color: #fff;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  z-index: 1;
  opacity: 0.8;
  transition: opacity 0.3s ease;
}

.flickity-prev-next-button:hover {
  opacity: 1;
}

.flickity-prev-next-button.previous {
  left: -50px;
}

.flickity-prev-next-button.next {
  right: -50px;
}

.flickity-prev-next-button svg {
  fill: #fff;
}

/* Responsive Design */
@media (max-width: 768px) {
  .carousel-cell {
    flex-direction: column;
    text-align: center;
  }

  .carousel-image img {
    width: 100%;
    margin-bottom: 1.5rem;
  }

  .carousel-text {
    width: 100%;
  }
}



</style>

<script>
document.addEventListener('DOMContentLoaded', function () {
  var elem = document.querySelector('.carousel');
  var flkty = new Flickity(elem, {
    cellAlign: 'left',
    contain: true,
    wrapAround: true,
    prevNextButtons: true,
    pageDots: false
  });
});
</script>

{% schema %}
{
  "name": "Custom Carousel",
  "settings": [],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "alt_text",
          "label": "Alt Text",
          "default": "Slide image"
        },
        {
          "type": "text",
          "id": "slide_heading",
          "label": "Heading",
          "default": "Slide Heading"
        },
        {
          "type": "textarea",
          "id": "slide_description",
          "label": "Description",
          "default": "Slide description text goes here."
        },
        {
          "type": "range",
          "id": "gentleness",
          "label": "Gentleness",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 50
        },
        {
          "type": "range",
          "id": "nourishment",
          "label": "Nourishment",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 50
        },
        {
          "type": "range",
          "id": "staying_power",
          "label": "Staying Power",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 50
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom Carousel",
    }
  ]
}
{% endschema %}