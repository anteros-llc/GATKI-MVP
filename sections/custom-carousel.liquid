<section class="custom-carousel">
  <div class="carousel-wrapper">
    <div class="carousel" data-flickity='{ "cellAlign": "left", "contain": true, "wrapAround": true, "prevNextButtons": true, "pageDots": false }'>
      {%- for block in section.blocks -%}
        {%- if block.type == 'slide' -%}
          <div class="carousel-cell">
            <!-- Image -->
            <div class="carousel-image">
              <img src="{{ block.settings.image | img_url: '800x' }}" alt="{{ block.settings.alt_text | escape }}">
            </div>

            <!-- Text Content -->
            <div class="carousel-text">
              <h2>{{ block.settings.slide_heading }}</h2>
              <p>{{ block.settings.slide_description }}</p>
              <!-- Custom Progress Bars -->
              <ul class="custom-sliders">
                <li>
                  <span>Gentleness</span>
                  <div class="slider">
                    <div class="slider-fill" style="width: {{ block.settings.gentleness }}%;"></div>
                  </div>
                </li>
                <li>
                  <span>Nourishment</span>
                  <div class="slider">
                    <div class="slider-fill" style="width: {{ block.settings.nourishment }}%;"></div>
                  </div>
                </li>
                <li>
                  <span>Staying Power</span>
                  <div class="slider">
                    <div class="slider-fill" style="width: {{ block.settings.staying_power }}%;"></div>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        {%- endif -%}
      {%- endfor -%}
    </div>
  </div>
</section>


<style>
/* Container Styles */
.custom-carousel {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 2rem 0;
}

.carousel-wrapper {
  display: flex;
  width: 100%;
  max-width: 1200px;
}

/* Carousel Styles */
.carousel {
  display: flex;
  width: 100%;
}

.carousel-cell {
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
  width: 100%;
}

/* Image Styles */
.carousel-image img {
  width: 50%;
  max-height: 70vh;
  object-fit: cover;
}

/* Text Section Styles */
.carousel-text {
  width: 45%;
  padding: 2rem;
}

.carousel-text h2 {
  font-size: 2rem;
  margin-bottom: 1rem;
}

.carousel-text p {
  font-size: 1rem;
  margin-bottom: 2rem;
}

/* Custom Sliders */
.custom-sliders {
  list-style: none;
  padding: 0;
  margin: 0;
}

.custom-sliders li {
  margin-bottom: 1rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.slider {
  flex-grow: 1;
  margin-left: 1rem;
  height: 4px;
  background: #ccc;
  position: relative;
}

.slider-fill {
  height: 100%;
  background: #d45b23;
  position: absolute;
  left: 0;
  top: 0;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function () {
  var elem = document.querySelector('.carousel');
  var flkty = new Flickity(elem, {
    cellAlign: 'left',
    contain: true,
    wrapAround: true,
    prevNextButtons: true,
    pageDots: false
  });
});
</script>

{% schema %}
{
  "name": "Custom Carousel",
  "settings": [],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "alt_text",
          "label": "Alt Text",
          "default": "Slide image"
        },
        {
          "type": "text",
          "id": "slide_heading",
          "label": "Heading",
          "default": "Slide Heading"
        },
        {
          "type": "textarea",
          "id": "slide_description",
          "label": "Description",
          "default": "Slide description text goes here."
        },
        {
          "type": "range",
          "id": "gentleness",
          "label": "Gentleness",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 50
        },
        {
          "type": "range",
          "id": "nourishment",
          "label": "Nourishment",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 50
        },
        {
          "type": "range",
          "id": "staying_power",
          "label": "Staying Power",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 50
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom Carousel",
    }
  ]
}
{% endschema %}