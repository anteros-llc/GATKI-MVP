{% comment %}
  Shopify Header with Custom Logo and Menu
  - Desktop: Logo on the left, menu items on the right
  - Mobile: Logo on the left, hamburger menu opens a drawer with menu items + cart
{% endcomment %}

{% schema %}
{
  "name": "Header-custom",
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "default": "main-menu",
      "label": "t:sections.header.settings.menu.label"
    }
  ],
  "presets": [
    {
      "name": "Header-custom",
      "settings": {
        "menu": "main-menu"
      }
    }
  ]
}
{% endschema %}

<header class="site-header">
  <div class="container">
    <div class="header-content">
      <div class="logo">
        <a href="{{ shop.url }}">
          <img src="{{ settings.logo | img_url: 'medium' }}" alt="{{ shop.name }}" />
        </a>
      </div>
      
      <nav class="desktop-menu">
        <ul>
          {% for link in linklists.main-menu.links %}
            <li><a href="{{ link.url }}">{{ link.title }}</a></li>
          {% endfor %}
          <li>
            <a href="{{ routes.cart_url }}" id="cart-icon-bubble">
              {% if cart == empty %}
                <span>CART</span>
              {% else %}
                <span>CART</span>
              {% endif %}
              <span class="visually-hidden">CART</span>
              {%- if cart != empty -%}
                <div class="cart-count-bubble">
                  {%- if cart.item_count < 100 -%}
                    <span aria-hidden="true">({{ cart.item_count }})</span>
                  {%- endif -%}
                  <span class="visually-hidden">{{ 'sections.header.cart_count' | t: count: cart.item_count }}</span>
                </div>
              {%- endif -%}
            </a>
          </li>
        </ul>
      </nav>

      <div class="mobile-menu-button" onclick="toggleMobileMenu()">
        <span class="icon">
          {{- 'icon-hamburger.svg' | inline_asset_content -}}
        </span>
      </div>
    </div>
  </div>

  <div class="mobile-menu">
    <div class="mobile-menu-header" onclick="toggleMobileMenu()">
      <span class="icon">
        {{- 'icon-close.svg' | inline_asset_content -}}
      </span>
    </div>
    <nav>
      <ul>
        {% for link in linklists.main-menu.links %}
          <li><a href="{{ link.url }}">{{ link.title }}</a></li>
        {% endfor %}
        <li>
          <a href="{{ routes.cart_url }}" id="cart-icon-bubble">
            {% if cart == empty %}
              <span>CART</span>
            {% else %}
              <span>CART</span>
            {% endif %}
            <span class="visually-hidden">CART</span>
            {%- if cart != empty -%}
              <div class="cart-count-bubble">
                {%- if cart.item_count < 100 -%}
                  <span aria-hidden="true">({{ cart.item_count }})</span>
                {%- endif -%}
                <span class="visually-hidden">{{ 'sections.header.cart_count' | t: count: cart.item_count }}</span>
              </div>
            {%- endif -%}
          </a>
        </li>
      </ul>
    </nav>
  </div>
</header>

<style>
  .site-header {
    background: #f8f4ef;
    padding: 15px 0;
    position: sticky;
    top: 0;
    width: 100%;
    z-index: 1000;
  }
  .header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .logo img {
    height: 40px;
  }
  .desktop-menu ul {
    display: flex;
    list-style: none;
    gap: 20px;
  }
  .desktop-menu a {
    text-decoration: none;
    color: black;
    font-size: 14px;
  }
  .mobile-menu-button {
    display: none;
    cursor: pointer;
  }
  .mobile-menu {
    display: none;
    position: fixed;
    top: 0;
    right: 0;
    width: 250px;
    height: 100vh;
    background: white;
    box-shadow: -5px 0 10px rgba(0, 0, 0, 0.1);
    padding: 20px;
  }
  .mobile-menu.active {
    display: block;
  }
  .mobile-menu-header {
    display: flex;
    justify-content: flex-end;
    padding: 10px;
    cursor: pointer;
  }
  .icon {
    display: inline-block;
    width: 24px;
    height: 24px;
  }
  .icon svg {
    width: 100%;
    height: 100%;
  }
  @media (max-width: 768px) {
    .desktop-menu {
      display: none;
    }
    .mobile-menu-button {
      display: block;
    }
  }
</style>

<script>
  function toggleMobileMenu() {
    document.querySelector('.mobile-menu').classList.toggle('active');
  }
</script>
